#!/bin/sh
# vim: ts=4 :

# Deletes and recreates Canvas modules based on Panopto sessions
# and modules.json
#
# Usage: recreate_modules [-vF] SESSION ...+
#
# Options:
#
#   -q      quiet (default; overrides -v)
#   -v      verbose
#   -F      don't fetch panopto sessions

. "$(dirname "$0")/.CASS"
eval "$(getargs -qvF ...)"

test -z "$flag_q" || flag_v=
test -n "$flag_v" || flag_q=-q

if [ -z "$flag_F" ]; then
    echo>&2 Fetching Panopto sessions...
    "$COURSE_BIN"/fetch_panopto_sessions $flag_q
fi

echo>&2 Deleting Canvas modules...
"$COURSE_BIN"/delete_modules $flag_v "$@"

echo>&2 Creating Canvas modules...
"$COURSE_BIN"/create_modules $flag_v "$@"
