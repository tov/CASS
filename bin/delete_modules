#!/usr/bin/env node

const Cass          = require('./cass')
const {MatchAnyArg} = require('./cass/util/matchers')

const matcher       = new MatchAnyArg

const maybeDelete = canvas => async module => {
  if (matcher.test(module.name))
    await canvas.deleteModule(module.id)
}

async function main() {
  const canvas   = new Cass().canvas()
  const modules  = await canvas.getModules()
  const promises = modules.map(maybeDelete(canvas))
  await Promise.all(promises)
}

main().then(_ => 0, console.log)
